<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.3.3/pixi.min.js"></script>
  <title>LA PAGINA DE IMPOSIBLEALX</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black; /* Fondo negro */
      background-size: certain; /* Tamaño del fondo */
      background-repeat: no-repeat; /* Repetición del fondo */
      background-position: center center; /* Posición del fondo */
      background-attachment: fixed; /* Fondo fijo */
    }
    canvas {
      display: block;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.4.0/Tween.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var backgrounds = [
        "images/fondo.png",
        "images/fondo1.png",
        "images/fondo2.png",
        "images/fondo3.png",
        "images/fondo4.png",
        "images/fondo5.png",
        "images/fondo6.png",
        "images/fondo7.png",
        "images/fondo8.png",
        "images/fondo9.png",
        "images/fondo10.png",
        "images/fondo11.png"
      ];

      var app = new PIXI.Application({
        width: window.innerWidth,
        height: window.innerHeight,
        transparent: true
      });

      document.body.appendChild(app.view);

      var loader = new PIXI.Loader();
      backgrounds.forEach(function(background) {
        loader.add(background);
      });

      loader.load(function(_, resources) {
        var currentBackgroundIndex = 0;
        var currentBackground = new PIXI.Sprite(resources[backgrounds[currentBackgroundIndex]].texture);
        app.stage.addChild(currentBackground);

        var pixelateFilter = new PIXI.filters.PixelateFilter();
        pixelateFilter.size = new PIXI.Point(1, 1);
        app.stage.filters = [pixelateFilter];

        function changeBackground() {
          currentBackgroundIndex = (currentBackgroundIndex + 1) % backgrounds.length;
          var nextBackground = new PIXI.Sprite(resources[backgrounds[currentBackgroundIndex]].texture);
          app.stage.addChild(nextBackground);

          var scaleX = app.renderer.width / nextBackground.width;
          var scaleY = app.renderer.height / nextBackground.height;
          var scale = Math.max(scaleX, scaleY);

          nextBackground.scale.set(scale);

          var tween = new TWEEN.Tween(pixelateFilter.size)
            .to({ x: 100, y: 100 }, 1500)
            .easing(TWEEN.Easing.Quadratic.Out)
            .onUpdate(function() {
              pixelateFilter.size.x = Math.round(pixelateFilter.size.x);
              pixelateFilter.size.y = Math.round(pixelateFilter.size.y);
            })
            .onComplete(function() {
              app.stage.removeChild(currentBackground);
              currentBackground = nextBackground;
              pixelateFilter.size = new PIXI.Point(1, 1);
            })
            .start();
        }

        setInterval(changeBackground, 3500);
      });
      
      var sound;

      function initializeAudio() {
        sound = new Howl({
          src: ['virginia.mp3'],
          loop: true
        });
      }

      function playAudio() {
        if (sound) {
          sound.play();
        }
      }

      document.addEventListener('click', function() {
        if (!sound) {
          initializeAudio();
        }
        playAudio();
      });

      function animate() {
        requestAnimationFrame(animate);
        TWEEN.update();
        app.renderer.render(app.stage);
      }

      animate();
    });
  </script>
</head>
<body>
  <!-- Contenido de tu página aquí -->
</body>
</html>
